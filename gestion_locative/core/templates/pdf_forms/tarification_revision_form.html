{% extends "pdf_forms/base_form.html" %}

{% block title %}Cr√©er Nouvelle Tarification{% endblock %}

{% block header_title %}Cr√©er Nouvelle Tarification{% endblock %}
{% block header_subtitle %}Suite √† r√©vision IRL/ILC{% endblock %}

{% block extra_style %}
button {
    background: #28a745 !important;
}
button:hover {
    background: #218838 !important;
}
{% endblock %}

{% block info_boxes %}
<div class="info-box">
    <strong>üìà R√©vision Calcul√©e</strong>
    <p><strong>Ancien loyer :</strong> {{ data.ancien_loyer|floatformat:2 }} ‚Ç¨</p>
    <p><strong>Nouveau loyer :</strong> {{ data.nouveau_loyer_hc|floatformat:2 }} ‚Ç¨</p>
    <p><strong>Indice :</strong> {{ data.ancien_indice }} ‚Üí {{ data.nouvel_indice }} ({{ data.nouveau_trimestre }})</p>
</div>

<div class="warning">
    <strong>‚ö†Ô∏è Action Requise</strong>
    <p style="margin-top: 5px;">La tarification actuelle sera ferm√©e automatiquement. V√©rifiez les dates ci-dessous avant de valider.</p>
</div>
{% endblock %}

{% block form_content %}
<h3 style="color: #495057; margin-top: 20px; margin-bottom: 15px; font-size: 16px;">
    Fermeture ancienne tarification
</h3>

<div class="form-group">
    <label>Date de fin de l'ancienne tarification :</label>
    <input type="date" name="date_fin_ancienne" value="{{ date_fin_auto }}" required>
    <small>La tarification actuelle prendra fin √† cette date (veille de la nouvelle)</small>
</div>

<h3 style="color: #495057; margin-top: 30px; margin-bottom: 15px; font-size: 16px;">
    Nouvelle tarification
</h3>

<div class="form-group">
    <label>Date de d√©but :</label>
    <input type="date" name="date_debut" value="{{ data.date_application }}" required>
    <small>Date √† partir de laquelle le nouveau loyer s'applique</small>
</div>

<div class="grid">
    <div class="form-group">
        <label>Loyer HC :</label>
        <input type="number" step="0.01" name="loyer_hc" value="{{ data.nouveau_loyer_hc }}" required>
    </div>

    <div class="form-group">
        <label>Charges :</label>
        <input type="number" step="0.01" name="charges" value="{{ data.charges }}" required>
    </div>
</div>

<div class="form-group">
    <label>Taxes :</label>
    <input type="number" step="0.01" name="taxes" value="{{ data.taxes }}" required>
</div>

<div class="grid">
    <div class="form-group">
        <label>Indice de r√©f√©rence :</label>
        <input type="number" step="0.01" name="indice_reference" value="{{ data.nouvel_indice }}" required>
    </div>

    <div class="form-group">
        <label>Trimestre de r√©f√©rence :</label>
        <input type="text" name="trimestre_reference" value="{{ data.nouveau_trimestre }}" required>
    </div>
</div>

<div class="form-group">
    <label>Motif du changement :</label>
    <input type="text" name="reason" value="{{ data.reason }}" required>
    <small>Ce motif sera affich√© dans l'historique des tarifications</small>
</div>
{% endblock %}

{% block submit_button %}‚úÖ Cr√©er la Tarification et G√©n√©rer le Courrier{% endblock %}
