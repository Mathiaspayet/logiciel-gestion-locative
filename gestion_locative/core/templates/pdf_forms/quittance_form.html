{% extends "pdf_forms/base_form.html" %}

{% block title %}{% if type_document == 'avis_echeance' %}Avis d'√âch√©ance{% else %}Quittance de Loyer{% endif %}{% endblock %}

{% block header_title %}{% if type_document == 'avis_echeance' %}Avis d'√âch√©ance{% else %}Quittance de Loyer{% endif %}{% endblock %}
{% block header_subtitle %}{{ bail.local.numero_porte }} - {{ bail.local.immeuble.nom }}{% endblock %}

{% block info_boxes %}
<div class="info-box">
    <strong>üìã Informations du Bail</strong>
    <p><strong>Locataire :</strong> {{ locataire }}</p>
    <p><strong>Local :</strong> {{ bail.local.numero_porte }}</p>
    <p><strong>Loyer actuel :</strong> {{ loyer_hc }} ‚Ç¨ HC + {{ charges }} ‚Ç¨ charges = {{ total }} ‚Ç¨ TTC</p>
    <p><strong>Fr√©quence :</strong> {{ frequence }}</p>
</div>
{% endblock %}

{% block form_content %}
<div class="form-group">
    <label>S√©lectionnez les p√©riodes √† inclure dans {% if type_document == 'avis_echeance' %}l'avis d'√©ch√©ance{% else %}la quittance{% endif %} :</label>
    <small>Maintenez Ctrl (Windows) ou Cmd (Mac) pour s√©lectionner plusieurs p√©riodes</small>

    <div style="margin-top: 12px; max-height: 300px; overflow-y: auto; border: 2px solid #e9ecef; border-radius: 6px; padding: 8px;">
        {% for periode in periodes_disponibles %}
        <div class="checkbox-group">
            <input type="checkbox" name="periodes" value="{{ periode.value }}" id="periode_{{ forloop.counter }}">
            <label for="periode_{{ forloop.counter }}">{{ periode.label }}</label>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    // Auto-check la p√©riode la plus r√©cente (premier √©l√©ment de la liste)
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('input[name="periodes"]');
        if (checkboxes.length > 0) {
            checkboxes[0].checked = true;
        }
    });
</script>
{% endblock %}

{% block submit_button %}üìÑ {% if type_document == 'avis_echeance' %}G√©n√©rer l'Avis d'√âch√©ance{% else %}G√©n√©rer la Quittance{% endif %}{% endblock %}
