{% extends "pdf_forms/base_form.html" %}

{% block title %}Solde de Tout Compte{% endblock %}

{% block header_title %}Arr√™t√© de Compte (Fin de Bail){% endblock %}
{% block header_subtitle %}{{ bail.local.numero_porte }} - {{ bail.local.immeuble.nom }}{% endblock %}

{% block extra_style %}
button {
    background: #d9534f !important;
}
button:hover {
    background: #c9302c !important;
}
{% endblock %}

{% block info_boxes %}
<div class="warning">
    <strong>‚ö†Ô∏è Fin de Bail</strong>
    <p><strong>Locataire :</strong> {{ locataire }}</p>
    <p><strong>D√©p√¥t de garantie initial :</strong> {{ depot_garantie }}</p>
</div>
{% endblock %}

{% block form_content %}
<div class="form-group">
    <label>Date de sortie (Fin de bail) :</label>
    <input type="date" name="date_sortie" required value="{{ default_date }}">
    <small>Date √† laquelle le locataire quitte d√©finitivement les lieux</small>
</div>

<div class="form-group">
    <label>Statut du dernier loyer :</label>
    <select name="statut_loyer" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 6px;">
        <option value="NON_PAYE">Le locataire n'a PAS pay√© la derni√®re p√©riode (√Ä d√©duire)</option>
        <option value="PAYE_TOTAL">Le locataire a pay√© la p√©riode compl√®te (Prorata √† rembourser)</option>
    </select>
    <small>Indiquez si le locataire a d√©j√† pay√© son loyer pour la p√©riode en cours</small>
</div>

<div class="form-group">
    <label>Retenues sur D√©p√¥t de Garantie (√âtat des lieux) :</label>
    <input type="number" step="0.01" name="montant_retenues" value="0.00">
    <small>Montant total des retenues pour d√©gradations constat√©es</small>
</div>

<div class="form-group">
    <label>Description des retenues / D√©gradations :</label>
    <textarea name="desc_retenues" rows="4" placeholder="Ex: Nettoyage moquette salon (50‚Ç¨), Remplacement cl√© (25‚Ç¨), R√©paration porte placard (80‚Ç¨)..." style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 6px; resize: vertical;"></textarea>
    <small>D√©taillez les retenues pour justification (optionnel)</small>
</div>

<div class="info-box" style="background: #fff3cd; border-left-color: #ffc107; margin-top: 20px;">
    <strong>üí° Information</strong>
    <p style="margin-top: 5px;">Le solde final sera calcul√© automatiquement en tenant compte :
        <br>‚Ä¢ Du d√©p√¥t de garantie vers√© initialement
        <br>‚Ä¢ Du prorata de loyer (selon le statut choisi)
        <br>‚Ä¢ Des retenues pour d√©gradations</p>
</div>
{% endblock %}

{% block submit_button %}üìÑ G√©n√©rer le Solde de Tout Compte{% endblock %}
